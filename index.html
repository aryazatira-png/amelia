<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Amell Birthday Web</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* ===== login layer style (simple & responsive, tweak bebas) ===== */
    .login-layer {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 18px;
      height: 100vh;
      width: 100%;
      background: black;
      color: white;
    }
    .login-title {
      font-size: 5vw;
      font-weight: 800;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 0 0 12px rgba(255,105,180,0.9);
    }
    .login-box {
      width: min(520px, 92%);
      background: #ff69b4;
      border-radius: 22px;
      padding: 22px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    }
    .login-row {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 12px;
    }
    .login-row label {
      font-weight: 700;
      font-size: 1rem;
      text-transform: uppercase;
      color: #fff;
    }
    .login-row input {
      height: 48px;
      border-radius: 12px;
      border: none;
      padding: 8px 12px;
      font-size: 1rem;
      outline: none;
    }
    .login-actions {
      display:flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
    }
    .login-actions button{
      background: #fff;
      color: #ff1493;
      padding: 10px 16px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-weight:700;
    }
    .login-error {
      color: #ffe8e8;
      background: rgba(0,0,0,0.25);
      padding: 6px 10px;
      border-radius: 8px;
      display:none;
    }

    /* minimal: keep original styles for other layers (user's CSS usually in style.css) */
    /* ...rain + memory styles will use external CSS; keep conflicts minimal... */
    /* small helper so login sits above splash in z-order if necessary */
    #login { z-index: 9999; position: fixed; top:0; left:0; }
  </style>
</head>
<body>

  <!-- NEW: Login Layer (index 0) -->
  <div id="login" class="layer active login-layer">
    <div class="login-title">LOGIN</div>
    <div class="login-box" role="form" aria-label="Login form">
      <div class="login-row">
        <label for="login-name">Nama</label>
        <input id="login-name" type="text" placeholder="masukkan nama..." autocomplete="name" />
      </div>
      <div class="login-row">
        <label for="login-pass">Password</label>
        <input id="login-pass" type="password" placeholder="masukkan password..." autocomplete="current-password" />
      </div>

      <div style="display:flex;justify-content:space-between;align-items:center;">
        <div class="login-error" id="login-error">Nama atau password salah.</div>
        <div class="login-actions">
          <button id="login-btn">MASUK</button>
        </div>
      </div>
      <div style="margin-top:8px;font-size:0.86rem;color:#ffd9e8">Gunakan: nama = <strong>amelia okta ramadani</strong> (lowercase), pass = <strong>111026</strong></div>
    </div>
  </div>

  <!-- Splash Screen (index 1) -->
  <div id="splash" class="layer">
    <video autoplay muted loop class="bg-video">
      <source src="asset/splash.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>
    <h1 class="glow-text">gak bakalan ada yang ngucapin kayak gini except AING</h1>
    <button id="startBtn">GASKEUNN</button>
  </div>

  <!-- Layer 1 Umur -->
  <div id="layer1" class="layer">
    <video autoplay muted loop class="bg-video">
      <source src="asset/video2.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>
    <h2>Umur Acmelia Okta Ramadani</h2>
    <p id="umur"></p>
    <button onclick="prevLayer()">â¬… Back</button>
    <button onclick="nextLayer()">Next âž¡</button>
  </div>

  <!-- Layer 2 Teks -->
  <div id="layer2" class="layer">
    <video autoplay muted loop class="bg-video">
      <source src="asset/video1.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>
    <h2 class="glow-text">HAPPY BIRTHDAY ACMELIA</h2>
    <p>Hari dimana bulan jadi punya saingan, eaaaa</p>
    <button onclick="prevLayer()">â¬… Back</button>
    <button onclick="nextLayer()">Next âž¡</button>
  </div>

  <!-- Layer 3 Galeri Foto -->
  <div id="layer3" class="layer">
    <video autoplay muted loop class="bg-video">
      <source src="asset/video3.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>
    <h2>ABOUT YOU</h2>
    <div class="gallery">
      <img src="asset/foto1.jpeg" alt="Foto 1" onclick="openLightbox(this, 'Always be yourself! Dont change your happiness just because of other people')">
      <img src="asset/foto2.jpeg" alt="Foto 2" onclick="openLightbox(this, 'Web ini bakalan ABADI, ada penghitung real time di slide 2 dan akan bertambah terus sesuai umur amel!')">
      <img src="asset/foto3.jpeg" alt="Foto 3" onclick="openLightbox(this, 'Semoga amel always dapetin semuanya, dapet pendidikan, dapet rezeki, dapet temen baik, dapet cowok baik, dapet kesehatan baik, dapet mood baik, dapet everything!')">
      <img src="asset/foto4.jpeg" alt="Foto 4" onclick="openLightbox(this, 'Inget! Terus improve and terus evaluasi, because you have an extraordinary potential! HAPUS SIFAT AVOIDANT LU!')">
    </div>
    <button onclick="prevLayer()">â¬… Back</button>
    <button onclick="nextLayer()">Next âž¡</button>
  </div>

  <!-- Layer 4 Mini Game -->
  <div id="layer4" class="layer">
    <video autoplay muted loop class="bg-video">
      <source src="asset/video4.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>
    <h2 class="glow-text">COBA NYOCOKIN KARTU DULU!</h2>
    <div class="memory-game" id="memory-game">
      <div class="memory-card" data-name="amel1">
        <img class="front-face" src="asset/amel1.jpeg" alt="amel1">
        <img class="back-face" src="asset/back.jpeg" alt="back">
      </div>
      <div class="memory-card" data-name="amel1">
        <img class="front-face" src="asset/amel1.jpeg" alt="amel1">
        <img class="back-face" src="asset/back.jpeg" alt="back">
      </div>
      <div class="memory-card" data-name="amel2">
        <img class="front-face" src="asset/amel2.jpeg" alt="amel2">
        <img class="back-face" src="asset/back.jpeg" alt="back">
      </div>
      <div class="memory-card" data-name="amel2">
        <img class="front-face" src="asset/amel2.jpeg" alt="amel2">
        <img class="back-face" src="asset/back.jpeg" alt="back">
      </div>
      <div class="memory-card" data-name="amel3">
        <img class="front-face" src="asset/amel3.jpeg" alt="amel3">
        <img class="back-face" src="asset/back.jpeg" alt="back">
      </div>
      <div class="memory-card" data-name="amel3">
        <img class="front-face" src="asset/amel3.jpeg" alt="amel3">
        <img class="back-face" src="asset/back.jpeg" alt="back">
      </div>
      <div class="memory-card" data-name="amel4">
        <img class="front-face" src="asset/amel4.jpeg" alt="amel4">
        <img class="back-face" src="asset/back.jpeg" alt="back">
      </div>
      <div class="memory-card" data-name="amel4">
        <img class="front-face" src="asset/amel4.jpeg" alt="amel4">
        <img class="back-face" src="asset/back.jpeg" alt="back">
      </div>
    </div>
    <div style="display:flex; gap:16px; margin-top:18px; align-items:center;">
      <button onclick="prevLayer()">â¬… Back</button>
      <button id="nextBtnLayer4" style="display:none;" onclick="nextLayer()">PRETT</button>
    </div>
  </div>

  <!-- Layer 5 Galeri Foto -->
  <div id="layer5" class="layer">
    <video autoplay muted loop class="bg-video">
      <source src="asset/video5.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>
    <h2>POEMS ABOUT YOU</h2>
    <div class="gallery">
      <img src="asset/foto5.jpeg" alt="Foto 5" onclick="openLightbox(this, 'nyoba nulis di binder')">
      <img src="asset/foto6.jpeg" alt="Foto 6" onclick="openLightbox(this, 'Gua gak pernah naksir, bogoh, ataupun mau sama lu, ini cuman pujian gua tentang lu')">
      <img src="asset/foto7.jpeg" alt="Foto 7" onclick="openLightbox(this, 'Emang untuk 2 puisi ini gua bikin cuman halu tapi pas dibaca malah cocok buat amel, jangan salah paham!')">
      <img src="asset/foto88.jpeg" alt="Foto 8" onclick="openLightbox(this, 'Ini sebelum gua ke bandung, keduanya bukan tentang lu tapi cuman halu, but tbh pas baca malah kebayang maneh,hehe maap gak maksud apapun')">
    </div>
    <button onclick="prevLayer()">â¬… Back</button>
    <button onclick="nextLayer()">Next âž¡</button>
  </div>

  <!-- Layer 6 Final Surprise -->
  <div id="layer6" class="layer">
    <video autoplay muted loop class="bg-video">
      <source src="asset/video6.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>
    <h2 class="glow-text">GIMANA RASANYA DIUCAPIN ULTAH KAYA GINI SAMA COWO SEPINTER DAN SEKEREN GWEHðŸ˜Ž</h2>
    <p>btw backgroundny ucapan dari berbagai bahasa</p>
    <button onclick="prevLayer()">â¬… Back</button>
    <button onclick="startRain()">IDIOT</button>
    <button onclick="nextLayer()">Next âž¡</button>
  </div>

  <!-- Layer 7 Randomize Kata-kata -->
  <div id="layer7" class="layer">
    <video autoplay muted loop class="bg-video">
      <source src="asset/video7.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>
    <h2 class="glow-text">BACOTAN GK BERFAEDAHðŸ’«</h2>
    <p id="random-quote">Klik tombol di bawah buat kata-kata hari ini</p>
    <button onclick="prevLayer()">â¬… Back</button>
    <button onclick="randomQuote()">ðŸŽ² NYOCOT</button>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" style="display:none;" onclick="closeLightbox()">
    <div class="lightbox-content">
      <img id="lightbox-img" src="">
      <p id="lightbox-caption"></p>
    </div>
  </div>

  <!-- Musik -->
  <audio id="bg-music" src="asset/musik.mp3" loop></audio>

  <!-- ==== SCRIPT: keep functionality, + login handler ==== -->
  <script>
    // --- basic layer system (login is index 0, splash index 1, etc.) ---
    let currentLayer = 0;
    const layers = Array.from(document.querySelectorAll('.layer'));

    function showLayer(idx) {
      idx = Math.max(0, Math.min(idx, layers.length - 1));
      layers.forEach((l, i) => {
        if (i === idx) {
          l.classList.add('active');
        } else {
          l.classList.remove('active');
        }
      });
      currentLayer = idx;
      // start memory game when reach layer4 (index 4)
      if (idx === 4) {
        // run initialization if not already
        if (typeof initMemoryGame === 'function') initMemoryGame();
      }
    }

    function nextLayer() {
      showLayer(Math.min(currentLayer + 1, layers.length - 1));
    }
    function prevLayer() {
      showLayer(Math.max(currentLayer - 1, 0));
    }

    // login logic
    const LOGIN_NAME = 'amelia okta ramadani';
    const LOGIN_PASS = '111026';
    const loginBtn = document.getElementById('login-btn');
    const loginName = document.getElementById('login-name');
    const loginPass = document.getElementById('login-pass');
    const loginError = document.getElementById('login-error');

    function tryLogin() {
      const nameVal = (loginName.value || '').trim().toLowerCase();
      const passVal = (loginPass.value || '').trim();
      if (nameVal === LOGIN_NAME && passVal === LOGIN_PASS) {
        loginError.style.display = 'none';
        // go to splash (index 1)
        showLayer(1);
      } else {
        loginError.style.display = 'block';
        // small shake
        document.querySelector('.login-box').animate(
          [{ transform: 'translateX(-6px)' }, { transform: 'translateX(6px)' }, { transform: 'translateX(0)' }],
          { duration: 300, iterations: 1 }
        );
      }
    }

    loginBtn.addEventListener('click', tryLogin);
    // allow Enter
    [loginName, loginPass].forEach(el => el.addEventListener('keydown', function(e){
      if (e.key === 'Enter') tryLogin();
    }));

    // start splash start button (still present)
    const startBtn = document.getElementById('startBtn');
    if (startBtn) startBtn.addEventListener('click', () => {
      // go to first content layer (layer1)
      // index of layer1 in DOM is 2 (since we added login + splash first), but we used layers array order:
      // layers: [login(0), splash(1), layer1(2), ...]
      showLayer(2); // open Umur slide
      const audio = document.getElementById('bg-music');
      if (audio) audio.play().catch(()=>{});
    });

    // ===== Hitung Umur Real-Time =====
    function updateUmur() {
      const lahir = new Date("2006-10-11T00:00:00");
      const sekarang = new Date();

      let tahun = sekarang.getFullYear() - lahir.getFullYear();
      let bulan = sekarang.getMonth() - lahir.getMonth();
      let hari = sekarang.getDate() - lahir.getDate();
      let jam = sekarang.getHours() - lahir.getHours();
      let menit = sekarang.getMinutes() - lahir.getMinutes();
      let detik = sekarang.getSeconds() - lahir.getSeconds();

      if (detik < 0) { detik += 60; menit--; }
      if (menit < 0) { menit += 60; jam--; }
      if (jam < 0) { jam += 24; hari--; }
      if (hari < 0) {
        const prevMonth = new Date(sekarang.getFullYear(), sekarang.getMonth(), 0);
        hari += prevMonth.getDate(); bulan--;
      }
      if (bulan < 0) { bulan += 12; tahun--; }

      const el = document.getElementById('umur');
      if (el) el.textContent = `${tahun} tahun, ${bulan} bulan, ${hari} hari, ${jam} jam, ${menit} menit, ${detik} detik`;
    }
    setInterval(updateUmur, 1000);
    updateUmur();

    // ===== Efek Hujan Gambar =====
    function startRain() {
      const container = document.body;
      for (let i = 0; i < 20; i++) {
        setTimeout(() => {
          let img = document.createElement('img');
          img.src = "asset/hujan.png";
          img.classList.add("rain-img");
          img.style.left = Math.random() * window.innerWidth + "px";
          img.style.animationDuration = (2 + Math.random() * 3) + "s";
          container.appendChild(img);
          setTimeout(() => img.remove(), 5000);
        }, i * 300);
      }
    }

    // ===== Lightbox =====
    function openLightbox(img, caption = "") {
      const lightbox = document.getElementById('lightbox');
      const lightboxImg = document.getElementById('lightbox-img');
      const lightboxCaption = document.getElementById('lightbox-caption');
      if (!lightbox) return;
      lightbox.style.display = 'flex';
      if (lightboxImg && img && img.src) lightboxImg.src = img.src;
      if (lightboxCaption) lightboxCaption.textContent = caption || img.alt || "";
    }
    function closeLightbox() {
      const lightbox = document.getElementById('lightbox');
      if (!lightbox) return;
      lightbox.style.display = 'none';
    }

    // ===== Memory Game init (layer 4) =====
    // Implemented so that flipping shows front-face (image) and back-face is the pink cover.
    // If you previously had issues where image didn't change, this routine toggles 'flip' class.
    let memoryInitialized = false;
    function initMemoryGame() {
      if (memoryInitialized) return;
      memoryInitialized = true;

      const cards = Array.from(document.querySelectorAll(".memory-card"));
      let hasFlippedCard = false;
      let lockBoard = false;
      let firstCard, secondCard;
      let matchedCount = 0;

      // ensure cards are initially unflipped
      cards.forEach(c => c.classList.remove('flip'));

      function flipCard() {
        if (lockBoard) return;
        if (this === firstCard) return;
        // toggle flip - .flip class rotates the card (CSS from earlier)
        this.classList.add('flip');

        if (!hasFlippedCard) {
          hasFlippedCard = true;
          firstCard = this;
          return;
        }
        secondCard = this;
        checkForMatch();
      }

      function checkForMatch() {
        const isMatch = firstCard.dataset.name === secondCard.dataset.name;
        if (isMatch) {
          disableCards();
        } else {
          unflipCards();
        }
      }

      function disableCards() {
        firstCard.removeEventListener('click', flipCard);
        secondCard.removeEventListener('click', flipCard);
        resetBoard();
        matchedCount++;
        if (matchedCount === 4) {
          const nextBtn = document.getElementById('nextBtnLayer4');
          if (nextBtn) nextBtn.style.display = 'inline-block';
        }
      }

      function unflipCards() {
        lockBoard = true;
        setTimeout(() => {
          firstCard.classList.remove('flip');
          secondCard.classList.remove('flip');
          resetBoard();
        }, 800);
      }

      function resetBoard() {
        [hasFlippedCard, lockBoard] = [false, false];
        [firstCard, secondCard] = [null, null];
      }

      function shuffle() {
        cards.forEach(card => {
          const randomPos = Math.floor(Math.random() * 8);
          card.style.order = randomPos;
        });
      }

      // attach listeners and shuffle now
      cards.forEach(card => card.addEventListener('click', flipCard));
      shuffle();
    }

    // initial show: keep login visible by default (layer 0)
    showLayer(0);
  </script>
</body>
</html>